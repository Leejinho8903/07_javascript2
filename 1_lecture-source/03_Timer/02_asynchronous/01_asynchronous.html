<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01_asynchronous</title>
</head>
<body>
    <h1>01. 비동기</h1>
    <p>
        자바스크립트 엔진은 한 번에 하나의 태스크만 실행할 수 있는 싱글 스레드 방식으로
        동작한다. 때문에 처리에 시간이 걸리는 태스크를 실행하는 경우 블로킹(작업 중단)
        이 발생한다.
    </p>

    <h3>동기 처리(synchronous)</h3>
    <p>
        현재 실행 중인 태스크가 종료할 때까지 다음에 실행 될 태스크가 대기하는 방식을
        동기 처리라고 한다. 장점은 태스크를 순서대로 하나씩 처리하므로 실행 순서가
        보장된다는 것이고 단점은 앞선 태스크 종료 시까지 이후 태스크가 블로킹 된다는
        것이다.
    </p>
    
    <script>
        function sleep(func, delay){
            const delayUtil = Date.now() + delay;

            while(Date.now() < delayUtil);

            func();
        }

        function delay(){
            console.log('실행 시간을 늦추고 싶어요');
        }

        function start(){
            console.log('바로 실행하고 싶어요!');
        }

        // start 함수는 sleep 함수의 실행이 종료 된 이후 호출 되므로 3초 이상 블로킹 된다.
        sleep(delay, 3000);
        start();
    </script>

    <h3>비동기 처리(asynchronous)</h3>
    <p>
        현재 실행 중인 태스크가 종료 되지 않은 상태라 해도 다음 태스크를 곧바로 실행하는
        방식을 비동기 처리라고 한다. 장점은 태스크가 블로킹 되지 않는다는 것이고 단점은
        태스크의 실행 순서가 보장되지 않는다는 것이다. setTimeout, setInterval, 이벤트
        핸들러, HTTP 요청 등은 비동기 처리 방식으로 동작한다.
    </p>

    <script>
        // 타이머 함수 setTimeout은 start 함수를 블로킹 하지 않는다.
        setTimeout(delay, 3000);
        start();
    </script>

</body>
</html>